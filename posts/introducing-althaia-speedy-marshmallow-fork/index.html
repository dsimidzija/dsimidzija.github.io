<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Introducing Althaia: a speedy Marshmallow fork" /><meta property="og:locale" content="en" /><meta name="description" content="Althaia is a drop-in replacement for the #1 Python serialization library - marshmallow" /><meta property="og:description" content="Althaia is a drop-in replacement for the #1 Python serialization library - marshmallow" /><link rel="canonical" href="/posts/introducing-althaia-speedy-marshmallow-fork/" /><meta property="og:url" content="/posts/introducing-althaia-speedy-marshmallow-fork/" /><meta property="og:site_name" content="Duško Simidžija" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-30T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Introducing Althaia: a speedy Marshmallow fork" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-12-30T00:00:00+00:00","datePublished":"2021-12-30T00:00:00+00:00","description":"Althaia is a drop-in replacement for the #1 Python serialization library - marshmallow","headline":"Introducing Althaia: a speedy Marshmallow fork","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/introducing-althaia-speedy-marshmallow-fork/"},"url":"/posts/introducing-althaia-speedy-marshmallow-fork/"}</script><title>Introducing Althaia: a speedy Marshmallow fork | Duško Simidžija</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Duško Simidžija"><meta name="application-name" content="Duško Simidžija"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/images/avatar-v1.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Duško Simidžija</a></div><div class="site-subtitle font-italic">Self Rubber Ducking</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/dsimidzija" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['dusko.simidzija','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/duskosimidzija" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Introducing Althaia: a speedy Marshmallow fork</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Introducing Althaia: a speedy Marshmallow fork</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Dusko Simidzija </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Dec 30, 2021, 12:00 AM +0000" >Dec 30, 2021<i class="unloaded">2021-12-30T00:00:00+00:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1393 words">7 min read</span></div></div><div class="post-content"><p><em>Althaia</em> is a drop-in replacement for the #1 Python serialization library - <a href="https://marshmallow.readthedocs.io/">marshmallow</a>. It is also a shallow fork of marshmallow, basically using the entire marshmallow source with a few patches to speed up the <code class="language-plaintext highlighter-rouge">dump</code> operations.</p><p style="text-align: center"><a href="https://github.com/dsimidzija/python-althaia"><img data-proofer-ignore data-src="https://badgen.net/badge/icon/github?icon=github&amp;label" alt="GitHub" /></a> <a href="https://pypi.org/project/althaia/"><img data-proofer-ignore data-src="https://badgen.net/pypi/v/althaia" alt="PyPI Version" /></a> <a href="https://pypi.org/project/althaia/"><img data-proofer-ignore data-src="https://badgen.net/pypi/license/althaia" alt="License" /></a> <a href="https://pypi.org/project/althaia/"><img data-proofer-ignore data-src="https://badgen.net/pypi/python/althaia" alt="PyPI Python" /></a></p><h2 id="tldr">TL;DR</h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>pip <span class="nb">install </span>althaia
</pre></table></code></div></div><div file="some/early/bootstrap/__init__.py" class="language-python highlighter-rouge"><div class="code-header"> <span text-data="some/early/bootstrap/__init__.py"><i class="fa-fw far fa-file-code"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c1"># patch python's sys.meta_path to allow althaia to handle all marshmallow imports
</span><span class="kn">import</span> <span class="n">althaia</span>
<span class="n">althaia</span><span class="p">.</span><span class="nf">patch</span><span class="p">()</span>
</pre></table></code></div></div><div file="everywhere/else/inyourproject.py" class="language-python highlighter-rouge"><div class="code-header"> <span text-data="everywhere/else/inyourproject.py"><i class="fa-fw far fa-file-code"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c1"># use marshmallow as if nothing changed, except now it's 45% faster
</span><span class="kn">from</span> <span class="n">marshmallow</span> <span class="kn">import</span> <span class="n">Schema</span>


<span class="k">class</span> <span class="nc">ConquestOfBread</span><span class="p">(</span><span class="n">Schema</span><span class="p">):</span>
    <span class="c1"># etc...
</span></pre></table></code></div></div><h2 id="background">Background</h2><p>A while back at work, we ran into some performance issues with a few endpoints while dumping some <em>mildly</em> large datasets. This was quite surprising because these were just regular JSON objects with fairly common fields. Additionally, we’re not talking about <em>millions</em> or even <em>billions</em> of rows, just somewhere in the range of 5k-20k query results (so far).</p><p>Upon further inspection, we realised the problem was marshmallow, and not our own code. This is a surprise, to be sure, but an unwelcome one. Sadly, there was no time to do anything about it as the project had to be done on schedule, so we simply worked around the issue as best as we could.</p><p>However, this continued to bug me privately - why is it so inefficient? While attempting to work around this performance problem, I attempted to find an alternative serialization library, one that could easily replace marshmallow. One of the first results you get when you try to find something like that is the <a href="https://voidfiles.github.io/python-serialization-benchmark/">Python Serialization Benchmark</a> page, which lists most relevant serialisation libraries, and some lesser-known ones.</p><p>While going through the list, I realised that all the alternatives lack some of the key features marshmallow offers, most notably <a href="https://stevenloria.com/dynamic-schemas-in-marshmallow/">dynamic schemas</a>, but also the entire ecosystem of validators and helper libraries that surrounds marshmallow. Not to mention the fact that we had a somewhat mature project on our hands, and reimplementing everything we did with marshmallow with some of the more obscure libraries is a rather dubious endeavor resource-wise, even if we had proof that it can be done.</p><p>There was no other way to find out what’s happening than to fire up <a href="https://docs.python.org/3/library/profile.html">cProfile</a>, more specifically <a href="https://github.com/rkern/line_profiler">line_profiler</a>, and try to figure out why marshmallow was underperforming. It didn’t take long to figure out that the culprits were <code class="language-plaintext highlighter-rouge">Schema.get_attribute()</code> and <code class="language-plaintext highlighter-rouge">Field.serialize()</code>.</p><h2 id="the-problem">The Problem</h2><p>These two methods are at the core of marshmallow’s dumping operations, and their fatal flaw is doing what is considered a semi-joke definition of madness: doing the same operation over and over again, and expecting a different outcome. In other words, for each object in a collection that is being dumped, marshmallow is trying to get the field <em>configuration</em>, in addition to the field <em>value</em>.</p><p>At first glance, this is a reasonable thing to do; for example, you have to figure out how to behave when a field is missing in the source object. The problem arises when you’re dumping somewhat large collections of objects, where marshmallow is going to try to detect how to behave <em>for each field and each object in the collection</em>. If you’re dumping a collection of 10k objects, and a single object has 15 fields, that’s 150k(!) lookups. In addition, if you take into consideration that each lookup involves multiple deep-level calls all around the inheritance tree, things get very slow <em>very quickly</em> (pun intended obviously).</p><h2 id="the-solutions">The Solution(s)</h2><p>So I wanted to (try to) do two things:</p><ul><li>See if we can somehow figure out some things only once while dumping a collection<li>Compile everything with Cython and see if it makes any difference</ul><p>As it turns out, both things were possible, and they bring about a significant performance improvement! The initial version of “first item” fixes were submitted to marshmallow repo as <a href="https://github.com/marshmallow-code/marshmallow/pull/1649">PR #1649</a>, where I also discovered that this problem was already discussed in detail in <a href="https://github.com/marshmallow-code/marshmallow/issues/805">issue #805</a>.</p><p>Additionally, to compile marshmallow with Cython, I needed to change some of the type hints. What’s weird about those is that <code class="language-plaintext highlighter-rouge">type</code> and <code class="language-plaintext highlighter-rouge">typing.Type[type]</code> are supposed to be equivalent, but apparently the compiler doesn’t think so.</p><h2 id="how-does-it-perform">How does it perform?</h2><p>According to the “official” tests from the marshmallow repo, the two fixes above shave off about 45% of execution time (~35% coming for the code changes, ~10% coming from the Cython compilation). For large(-ish) datasets, this is quite significant.</p><p>Compared to <a href="https://github.com/lyft/toasted-marshmallow">Toasted Marshmallow</a>, Althaia seems to perform slightly worse, but I still need to run proper benchmarks and contribute a PR to the Serialization Benchmarks repo (the initial run is already visible in the <a href="https://github.com/dsimidzija/python-althaia/blob/feature/ci/README.md#how-fast-is-it">README.md</a>). The problem with <em>Toasted</em> is that it requires client-side code changes to use, and the fact that it is stuck on using marshmallow v2, which is quite old right now and already outperformed by marshmallow v3+. Not to mention that it <a href="https://github.com/marshmallow-code/marshmallow/issues/805#issuecomment-530954571">doesn’t support dotted syntax</a> and other goodies. Althaia maintains full compatibility with marshmallow, with nearly the same gains as when using <em>Toasted</em>.</p><p><strong>Note:</strong> The benchmarks in <em>Python Serialization Benchmark</em> are a bit fishy: it looks like <em>Toasted Marshmallow</em> is <a href="https://github.com/voidfiles/python-serialization-benchmark/issues/12">overwriting the marshmallow installation</a>, so the results for it are severely misrepresented by testing the version installed by <em>Toasted</em>. Let’s compare the numbers (all values are usec/dump from the official benchmark):</p><div class="table-wrapper"><table><thead><tr><th style="text-align: right">Toasted (base/v2)<th style="text-align: right">Toasted (optimized)<th style="text-align: right">Latest Marshmallow<th style="text-align: right">Althaia<tbody><tr><td style="text-align: right">2682.61<td style="text-align: right">176.38<td style="text-align: right">444.91<td style="text-align: right">239.24</table></div><p>The first two numbers are taken from the <em>Toasted</em> readme, while the last two are local benchmarks. Obviously, <em>Toasted</em> base marshmallow is <em>very</em> slow compared to the latest release. The entire repo may require a rewrite to compare each library in a separate environment.</p><p>Surprisingly (but also maybe not), running Althaia on PyPy with the cython-compiled modules actually <em>reduces</em> performance by a very significant amount, so the compilation step has been disabled for PyPy installations. The code optimisations improve the performance on their own by about 15% (79.85 vs 68.38 usec/dump), quite a bit less than the average 45% gain on CPython.</p><h2 id="how-does-it-work">How does it work?</h2><p>The final implementation is actually fairly simple, we use the upstream marshmallow as a git submodule, copy all the sources and change all the namespaces from <code class="language-plaintext highlighter-rouge">marshmallow</code> to <code class="language-plaintext highlighter-rouge">althaia.marshmallow</code>, and then apply our patches (from the <code class="language-plaintext highlighter-rouge">patches/</code> folder). Then we compile everything with Cython, and build all the various binary wheels. Source install will require cython to compile the modules locally, and while it’s not the slowest thing in the world, you will notice it. Contributions for more pre-built wheels are welcome.</p><h2 id="closing-notes">Closing notes</h2><p>I’ve never built or maintained a python package, let alone a cython variant. So there were a few gotchas worth noting:</p><ul><li><p>Publishing packages on PyPI is a potential minefield if you’re not careful - once you publish a package, it cannot be updated, replaced, or otherwise modified. Clearly, that makes sense for many reasons (security being a major factor), but it may not be obvious to a new user. Luckily, there is <a href="https://test.pypi.org">https://test.pypi.org</a> where you can experiment before doing the real thing.</p><li><p>Creating a non-trivial Python package is <em>convoluted</em>. Somewhat replicating the experience of <a href="https://www.reddit.com/r/Python/comments/fd039n/python_packaging_documentation_sucks/">this reddit rant</a>, when you start looking into it, you can get easily distracted: setup.py, setup.cfg, distutils, setuptools, cython, cffi, PyPA build, …</p><p style="text-align: center"><a href="https://xkcd.com/1987/"><img data-proofer-ignore data-src="https://imgs.xkcd.com/comics/python_environment.png" alt="relevant xkcd" /></a> <em>Relevant xkcd</em></p><p>Luckily, things are greatly simplified by using <code class="language-plaintext highlighter-rouge">pyproject.toml</code>, <a href="https://www.python.org/dev/peps/pep-0517/">PEP 517</a>, and <a href="https://python-poetry.org/">Poetry</a> - probably the nicest tool you’ll find in this whole mess.</p><li><p>Building <a href="https://github.com/pypa/manylinux">manylinux</a> (et al.) wheels is also a tricky task on its own, but luckily there is <a href="https://github.com/pypa/cibuildwheel">cibuildwheel</a> which helps <em>a lot</em>. However, even that doesn’t solve everything if you have a custom build/test scripts, like Althaia has, which is painfully obvious in the <code class="language-plaintext highlighter-rouge">[tool.cibuildwheel]</code> section(s) of <code class="language-plaintext highlighter-rouge">pyproject.toml</code>.</p><li><p>If you plan on using the previously mentioned <a href="https://www.python.org/dev/peps/pep-0517/">PEP 517</a> frontend for your custom builds, <em>do not name your build script</em> <code class="language-plaintext highlighter-rouge">build.py</code>, or suddenly you won’t be able to actually produce a wheel. The reason is, of course, that <code class="language-plaintext highlighter-rouge">python -m build</code> is now running <em>your</em> <code class="language-plaintext highlighter-rouge">build.py</code>, and not the <a href="https://github.com/pypa/build">PyPA build</a> frontend.</p><li><p>Attempting to compile <code class="language-plaintext highlighter-rouge">__init__.py</code> with cython on Windows will get you <a href="https://github.com/cython/cython/issues/2968">some weird looks from the linker</a> due to <del><em>some bullshit</em></del> <a href="https://bugs.python.org/issue35893">historical reasons</a>. The issue is marked as fixed, but it’s not fixed in the cython version published on PyPI.</p><li><p>If you have a slow task which is CPU-bound, good luck trying to do it concurrently under CPython, and working around the <a href="https://wiki.python.org/moin/GlobalInterpreterLock">Global Interpreter Lock</a>.</p></ul><h2 id="links">Links</h2><ul><li><a href="https://pypi.org/project/althaia/">Althaia @ PyPI</a><li><a href="https://github.com/dsimidzija/python-althaia">Althaia @ GitHub</a><li><a href="https://marshmallow.readthedocs.io/">Marshmallow Docs</a><li><a href="https://github.com/marshmallow-code/marshmallow">Marshmallow @ GitHub</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/programming/" class="post-tag no-text-decoration" >programming</a> <a href="/tags/python/" class="post-tag no-text-decoration" >python</a> <a href="/tags/marshmallow/" class="post-tag no-text-decoration" >marshmallow</a> <a href="/tags/serialization/" class="post-tag no-text-decoration" >serialization</a> <a href="/tags/marshalling/" class="post-tag no-text-decoration" >marshalling</a> <a href="/tags/althaia/" class="post-tag no-text-decoration" >althaia</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Introducing Althaia: a speedy Marshmallow fork - Duško Simidžija&url=/posts/introducing-althaia-speedy-marshmallow-fork/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Introducing Althaia: a speedy Marshmallow fork - Duško Simidžija&u=/posts/introducing-althaia-speedy-marshmallow-fork/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Introducing Althaia: a speedy Marshmallow fork - Duško Simidžija&url=/posts/introducing-althaia-speedy-marshmallow-fork/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=/posts/introducing-althaia-speedy-marshmallow-fork/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Introducing Althaia: a speedy Marshmallow fork - Duško Simidžija&url=/posts/introducing-althaia-speedy-marshmallow-fork/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/euro-truck-simulator-2-headtracking-linux/">Euro Truck Simulator 2, G29, and headtracking on linux</a><li><a href="/posts/reclaiming-lost-space-on-ext4/">Reclaiming lost space on ext4 partitions</a><li><a href="/posts/on-intellectual-snobbery/">On intellectual snobbery</a><li><a href="/posts/creating-atomic-methods-in-csharp/">Creating atomic methods in C#</a><li><a href="/posts/a-proper-way-of-learning-vim/">A proper way of learning Vim</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/howto/">howto</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/fix/">fix</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/reviews/">reviews</a> <a class="post-tag" href="/tags/tricks/">tricks</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/net/">.net</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/speeding-up-pytest-sqlalchemy/"><div class="card-body"> <span class="timeago small" >Mar 22, 2020<i class="unloaded">2020-03-22T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Speeding up pytest + sqlalchemy</h3><div class="text-muted small"><p> A large chunk of python projects use SQLAlchemy as ORM, and in doing so may actually be doubling their test runs. One of the more interesting things I discovered while running tests with profili...</p></div></div></a></div><div class="card"> <a href="/posts/on-intellectual-snobbery/"><div class="card-body"> <span class="timeago small" >Jul 31, 2014<i class="unloaded">2014-07-31T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>On intellectual snobbery</h3><div class="text-muted small"><p> I recently received a link to a job ad from a coworker, published on a major Croatian job market website. It was so stupid I wrote this. Why was it stupid? Simply put, the amount of snobbery in ...</p></div></div></a></div><div class="card"> <a href="/posts/creating-atomic-methods-in-csharp/"><div class="card-body"> <span class="timeago small" >Aug 5, 2014<i class="unloaded">2014-08-05T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Creating atomic methods in C#</h3><div class="text-muted small"><p> Did you ever need a simple way to create an atomic action in your application? Thanks to closures, this has now become trivially easy to accomplish. Background For some context, here is how I ca...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/speeding-up-pytest-sqlalchemy/" class="btn btn-outline-primary" prompt="Older"><p>Speeding up pytest + sqlalchemy</p></a> <a href="/posts/euro-truck-simulator-2-headtracking-linux/" class="btn btn-outline-primary" prompt="Newer"><p>Euro Truck Simulator 2, G29, and headtracking on linux</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://dsimidzija.github.io">Dusko Simidzija</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/howto/">howto</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/fix/">fix</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/reviews/">reviews</a> <a class="post-tag" href="/tags/tricks/">tricks</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/net/">.net</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-53678026-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-53678026-1'); }); </script>
