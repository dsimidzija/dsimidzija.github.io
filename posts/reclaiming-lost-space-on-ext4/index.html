<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Reclaiming lost space on ext4 partitions" /><meta property="og:locale" content="en" /><meta name="description" content="A minimal, portfolio, sidebar, bootstrap Jekyll theme with responsive web design and focuses on text presentation." /><meta property="og:description" content="A minimal, portfolio, sidebar, bootstrap Jekyll theme with responsive web design and focuses on text presentation." /><link rel="canonical" href="/posts/reclaiming-lost-space-on-ext4/" /><meta property="og:url" content="/posts/reclaiming-lost-space-on-ext4/" /><meta property="og:site_name" content="Duško Simidžija" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2014-06-01T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Reclaiming lost space on ext4 partitions" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-12-30T18:19:45+00:00","datePublished":"2014-06-01T00:00:00+00:00","description":"A minimal, portfolio, sidebar, bootstrap Jekyll theme with responsive web design and focuses on text presentation.","headline":"Reclaiming lost space on ext4 partitions","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/reclaiming-lost-space-on-ext4/"},"url":"/posts/reclaiming-lost-space-on-ext4/"}</script><title>Reclaiming lost space on ext4 partitions | Duško Simidžija</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Duško Simidžija"><meta name="application-name" content="Duško Simidžija"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/images/avatar-v1.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Duško Simidžija</a></div><div class="site-subtitle font-italic">Self Rubber Ducking</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/dsimidzija" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['dusko.simidzija','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/duskosimidzija" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Reclaiming lost space on ext4 partitions</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Reclaiming lost space on ext4 partitions</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Dusko Simidzija </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Jun 1, 2014, 12:00 AM +0000" >Jun 1, 2014<i class="unloaded">2014-06-01T00:00:00+00:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Dec 30, 2021, 7:19 PM +0100" >Dec 30, 2021<i class="unloaded">2021-12-30T18:19:45+00:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="346 words">1 min read</span></div></div><div class="post-content"><p>After four years of using Ubuntu 10.10 (Maverick), I’ve finally decided to bite the bullet and upgrade. But then I’ve noticed that the system is reporting 77GB of “Free space” and only 9GB of “Available space”. Turns out I had more <em>free space</em> than I thought…</p><p><a name="excerpt-continue"></a></p><p>Maverick was the last release with usable (i.e. Gnome2) interface, so I was kind of stuck with it for a long time. Today I decided to install <a href="http://blog.linuxmint.com/?p=2626">Mint 17 “Qiana”</a>, as Cinnamon now seems mature enough for daily use. While restoring the balance of natural forces on the machine (i.e. reinstalling and configuring everything) I noticed that the System Monitor is reporting the above numbers.</p><p>After ten minutes of reading various google search results, I discovered that ext4 filesystem will reserve a certain amount of free space for the root user <em>on each partition</em>. Apparently, if your disk gets filled up, you cannot log in anymore. Therefore, a portion of the disk is reserved for root, so he can still log in and fix the issue even if the regular used can’t do a thing.</p><p>Problem is, ext4 reserves 5% of each partition by default. This was fine years ago when this feature was introduced, but on a more recent 1.5TB partition, that’s some 50+GB of free space wasted. <em>Especially</em> since this reserved space is not needed on non-system partitions, i.e. my <code class="language-plaintext highlighter-rouge">/home</code> partition.</p><p>Luckily, the fix is easy, simply use <code class="language-plaintext highlighter-rouge">tune2fs</code> to reduce the percentage of reserved space:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>tune2fs <span class="nt">-m</span> 1 /dev/sda7
</pre></table></code></div></div><p>In this example, the reserved space is set to 1% on <code class="language-plaintext highlighter-rouge">sda7</code>.</p><p>Two things to note here:</p><ol><li>Yes, you can set it to zero on a non-system partition, but I’d advise against it. ext4 performance can drop dramatically if it gets near 100% utilisation since the reserved space is also used to reduce disk fragmentation.<li>You need to give <code class="language-plaintext highlighter-rouge">tune2fs</code> a block device, not a mount point for this to work. In other words, you can’t use <code class="language-plaintext highlighter-rouge">sudo tune2fs -m 1 /home</code>.</ol><p>It’s probably time for ext4 maintainers to refine this percentage for large disks.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/linux/'>Linux</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/tags/fix/" class="post-tag no-text-decoration" >fix</a> <a href="/tags/ext4/" class="post-tag no-text-decoration" >ext4</a> <a href="/tags/mint/" class="post-tag no-text-decoration" >mint</a> <a href="/tags/ubuntu/" class="post-tag no-text-decoration" >ubuntu</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Reclaiming lost space on ext4 partitions - Duško Simidžija&url=/posts/reclaiming-lost-space-on-ext4/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Reclaiming lost space on ext4 partitions - Duško Simidžija&u=/posts/reclaiming-lost-space-on-ext4/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Reclaiming lost space on ext4 partitions - Duško Simidžija&url=/posts/reclaiming-lost-space-on-ext4/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=/posts/reclaiming-lost-space-on-ext4/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Reclaiming lost space on ext4 partitions - Duško Simidžija&url=/posts/reclaiming-lost-space-on-ext4/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/euro-truck-simulator-2-headtracking-linux/">Euro Truck Simulator 2, G29, and headtracking on linux</a><li><a href="/posts/reclaiming-lost-space-on-ext4/">Reclaiming lost space on ext4 partitions</a><li><a href="/posts/on-intellectual-snobbery/">On intellectual snobbery</a><li><a href="/posts/creating-atomic-methods-in-csharp/">Creating atomic methods in C#</a><li><a href="/posts/a-proper-way-of-learning-vim/">A proper way of learning Vim</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/howto/">howto</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/fix/">fix</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/reviews/">reviews</a> <a class="post-tag" href="/tags/tricks/">tricks</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/net/">.net</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/adding-additional-molecule-files-to-molecule-screensaver/"><div class="card-body"> <span class="timeago small" >Feb 16, 2014<i class="unloaded">2014-02-16T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Adding additional molecule files to molecule screensaver</h3><div class="text-muted small"><p> I wanted to add additional molecule definitions to the excellent molecule screensaver. But in the infinite wisdom of Gnome developers, it is not possible to configure your screensaver through a sim...</p></div></div></a></div><div class="card"> <a href="/posts/jekyll-bootstrap-themes-and-github-pages/"><div class="card-body"> <span class="timeago small" >Feb 15, 2014<i class="unloaded">2014-02-15T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Jekyll-Bootstrap themes and GitHub Pages</h3><div class="text-muted small"><p> UPDATE: This site has since been switched to the elegant theme by the name of Chirpy. After setting up jekyll-bootstrap and playing with it for a while, I decided to try and set up a custom theme ...</p></div></div></a></div><div class="card"> <a href="/posts/euro-truck-simulator-2-headtracking-linux/"><div class="card-body"> <span class="timeago small" >Apr 30<i class="unloaded">2023-04-30T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Euro Truck Simulator 2, G29, and headtracking on linux</h3><div class="text-muted small"><p> Intro Setting up a basic driving platform on a Linux machine is “easy enough”, provided you have all the information you need. The problem is that the information is scattered all over the interne...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/adding-additional-molecule-files-to-molecule-screensaver/" class="btn btn-outline-primary" prompt="Older"><p>Adding additional molecule files to molecule screensaver</p></a> <a href="/posts/on-intellectual-snobbery/" class="btn btn-outline-primary" prompt="Newer"><p>On intellectual snobbery</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://dsimidzija.github.io">Dusko Simidzija</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/howto/">howto</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/fix/">fix</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/reviews/">reviews</a> <a class="post-tag" href="/tags/tricks/">tricks</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/net/">.net</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-53678026-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-53678026-1'); }); </script>
